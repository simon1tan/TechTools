var singleDs=[];!function(t){function i(i,e){this.form=i,this.isDirty=!1,this.options=e,this.history=["clean","clean"],this.id=t(i).attr("id"),singleDs.push(this)}i.prototype={init:function(){this.saveInitialValues(),this.setEvents()},saveInitialValues:function(){this.form.find("input, select, textarea").each(function(){t(this).attr("data-dirrty-initial-value",t(this).val())}),this.form.find("input[type=checkbox], input[type=radio]").each(function(){t(this).is(":checked")?t(this).attr("data-dirrty-initial-value","checked"):t(this).attr("data-dirrty-initial-value","unchecked")})},setEvents:function(){var i=this;t(document).ready(function(){i.form.on("submit",function(){i.submitting=!0}),i.options.preventLeaving&&t(window).on("beforeunload",function(){if(i.isDirty&&!i.submitting)return i.options.leavingMessage}),i.form.find("input, select").change(function(){i.checkValues()}),i.form.find("input, textarea").on("keyup keydown blur",function(){i.checkValues()}),i.form.find("input[type=radio], input[type=checkbox]").on("ifChecked",function(t){i.checkValues()})})},checkValues:function(){var i=this;this.form.find("input, select, textarea").each(function(){var i=t(this).attr("data-dirrty-initial-value");t(this).val()!=i?t(this).attr("data-is-dirrty","true"):t(this).attr("data-is-dirrty","false")}),this.form.find("input[type=checkbox], input[type=radio]").each(function(){var i=t(this).attr("data-dirrty-initial-value");t(this).is(":checked")&&"checked"!=i||!t(this).is(":checked")&&"checked"==i?t(this).attr("data-is-dirrty","true"):t(this).attr("data-is-dirrty","false")});var e=!1;this.form.find("input, select, textarea").each(function(){"true"==t(this).attr("data-is-dirrty")&&(e=!0)}),e?i.setDirty():i.setClean(),i.fireEvents()},fireEvents:function(){this.isDirty&&this.wasJustClean()&&this.form.trigger("dirty"),!this.isDirty&&this.wasJustDirty()&&this.form.trigger("clean")},setDirty:function(){this.isDirty=!0,this.history[0]=this.history[1],this.history[1]="dirty"},setClean:function(){this.isDirty=!1,this.history[0]=this.history[1],this.history[1]="clean"},wasJustDirty:function(){return"dirty"==this.history[0]},wasJustClean:function(){return"clean"==this.history[0]}},t.fn.dirrty=function(e){if(/^(isDirty)$/i.test(e)||/^(setClean)$/i.test(e)){var n;if(!(n=(s=t(this).attr("id"),t(singleDs).each(function(){t(this)[0].id==s&&(r=t(this)[0])}),r)))(n=new i(t(this),e)).init();switch(e){case"isDirty":return n.isDirty;case"setClean":return n.setClean(),!0}}else if("object"==typeof e||!e)return this.each(function(){e=t.extend({},t.fn.dirrty.defaults,e),new i(t(this),e).init()});var s,r},t.fn.dirrty.defaults={preventLeaving:!0,leavingMessage:"You have unsaved changes",onDirty:function(){},onClean:function(){}}}(jQuery);