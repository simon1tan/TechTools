!function(e,t){function n(t){if("function"!=typeof require||"undefined"==typeof module||!module.exports)return e[t];try{return require(t.toLowerCase())}catch(e){}}var r,o,i,a,u=e.document,s=n("jQuery")||n("Zepto")||n("ender")||u,f="keydown";function l(e,t){return null===e?"null"===t:void 0===e?"undefined"===t:e.is&&e instanceof s?"element"===t:Object.prototype.toString.call(e).toLowerCase().indexOf(t)>7}s===u?(r=function(e,t){return e?s.querySelector(e,t||s):s},o=function(e,t){e.addEventListener(f,t,!1)},i=function(e,t){e.removeEventListener(f,t,!1)},a=function(e,t){var n,r=u.createEvent("Event");r.initEvent(f,!0,!0);for(n in t)r[n]=t[n];return(e||s).dispatchEvent(r)}):(r=function(e,t){return s(e||u,t)},o=function(e,t){s(e).bind(f+".jwerty",t)},i=function(e,t){s(e).unbind(f+".jwerty",t)},a=function(e,t){s(e||u).trigger(s.Event(f,t))});for(var c={16:"shiftKey",17:"ctrlKey",18:"altKey",91:"metaKey"},y={mods:{"⇧":16,shift:16,"⌃":17,ctrl:17,"⌥":18,alt:18,option:18,"⌘":91,meta:91,cmd:91,super:91,win:91},keys:{"⌫":8,backspace:8,"⇥":9,"⇆":9,tab:9,"↩":13,return:13,enter:13,"⌅":13,pause:19,"pause-break":19,"⇪":20,caps:20,"caps-lock":20,"⎋":27,escape:27,esc:27,space:32,"↖":33,pgup:33,"page-up":33,"↘":34,pgdown:34,"page-down":34,"⇟":35,end:35,"⇞":36,home:36,ins:45,insert:45,del:46,delete:46,"←":37,left:37,"arrow-left":37,"↑":38,up:38,"arrow-up":38,"→":39,right:39,"arrow-right":39,"↓":40,down:40,"arrow-down":40,"*":106,star:106,asterisk:106,multiply:106,"+":107,plus:107,"-":109,subtract:109,"num-.":110,"num-period":110,"num-dot":110,"num-full-stop":110,"num-delete":110,";":186,semicolon:186,"=":187,equals:187,",":188,comma:188,".":190,period:190,"full-stop":190,"/":191,slash:191,"forward-slash":191,"`":192,tick:192,"back-quote":192,"[":219,"open-bracket":219,"\\":220,"back-slash":220,"]":221,"close-bracket":221,"'":222,quote:222,apostraphe:222}},d=47,m=0;++d<106;)y.keys[m]=d,y.keys["num-"+m]=d+48,++m;for(d=111,m=1;++d<136;)y.keys["f"+m]=d,++m;for(d=64;++d<91;)y.keys[String.fromCharCode(d).toLowerCase()]=d;function p(e){var t,n,r,o,i,a,u,s,f;if(e instanceof p)return e;for(l(e,"array")||(e=String(e).replace(/\s/g,"").toLowerCase().match(/(?:\+,|[^,])+/g)),t=0,n=e.length;t<n;++t){for(l(e[t],"array")||(e[t]=String(e[t]).match(/(?:\+\/|[^\/])+/g)),a=[],r=e[t].length;r--;){for(u=e[t][r],i={jwertyCombo:String(u),shiftKey:!1,ctrlKey:!1,altKey:!1,metaKey:!1},l(u,"array")||(u=String(u).toLowerCase().match(/(?:(?:[^\+])+|\+\+|^\+$)/g)),o=u.length;o--;)"++"===u[o]&&(u[o]="+"),u[o]in y.mods?i[c[y.mods[u[o]]]]=!0:u[o]in y.keys?i.keyCode=y.keys[u[o]]:s=u[o].match(/^\[([^-]+\-?[^-]*)-([^-]+\-?[^-]*)\]$/);if(l(i.keyCode,"undefined"))if(s&&s[1]in y.keys&&s[2]in y.keys){for(s[2]=y.keys[s[2]],s[1]=y.keys[s[1]],f=s[1];f<s[2];++f)a.push({altKey:i.altKey,shiftKey:i.shiftKey,metaKey:i.metaKey,ctrlKey:i.ctrlKey,keyCode:f,jwertyCombo:String(u)});i.keyCode=f}else i.keyCode=0;a.push(i)}this[t]=a}return this.length=t,this}var h=t.jwerty={event:function(e,t,n){if(l(t,"boolean")){var r=t;t=function(){return r}}var o,i=0,a=(e=new p(e)).length-1;return function(r){if(o=h.is(e,r,i))return i<a?void++i:(!1===t.call(n||this,r,o)&&r.preventDefault(),void(i=0));i=h.is(e,r)?1:0}},is:function(e,t,n){e=(e=new p(e))[n=n||0],t=t.originalEvent||t;for(var r=e.length,o=!1;r--;){o=e[r].jwertyCombo;for(var i in e[r])"jwertyCombo"!==i&&t[i]!=e[r][i]&&(o=!1);if(!1!==o)return o}return o},key:function(t,n,a,u,s){var f=l(a,"element")||l(a,"string")?a:u,c=f===a?e:a,y=f===a?u:s,d=l(f,"element")?f:r(f,y),m=h.event(t,n,c);return o(d,m),{unbind:function(){i(d,m)}}},fire:function(e,t,n,o){e=new p(e);var i=l(n,"number")?n:o;a(l(t,"element")?t:r(t,n),e[i||0][0])},KEYS:y}}("undefined"!=typeof global&&global.window||this,"undefined"!=typeof module&&module.exports?module.exports:this);